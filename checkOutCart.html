<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Poppins Font -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f0f2f5; /* Light grey background */
        }
        /* Hide steps by default, 'active' class will show them */
        .checkout {
            display: none;
        }
        .checkout.active {
            display: block;
        }
    </style>
</head>
<body class="flex justify-center items-center min-h-screen p-4">

    <!-- Main Checkout Container -->
    <div class="bg-white rounded-3xl shadow-lg w-full max-w-md overflow-hidden">

        <!-- Dynamic Header Section -->
        <div id="checkout-header" class="bg-gradient-to-r from-green-500 to-green-600 p-4 text-white flex items-center justify-between rounded-t-3xl relative">
            <h1 class="text-xl font-semibold"></h1>
            <span id="items-count" class="bg-white text-green-700 px-3 py-1 rounded-full text-sm font-medium hidden">2 Items</span>
        </div>

        <!-- Dynamic Progress Steps Section -->
        <div class="flex justify-around items-center p-4 bg-gray-50 border-b border-gray-100">
            <div id="cart-step" class="flex flex-col items-center text-gray-400 transition-colors duration-300">
                <i class="fas fa-shopping-cart text-2xl mb-1"></i>
                <span class="text-xs font-medium">Cart</span>
            </div>
            <div id="cart-address-line" class="flex-1 border-t-2 border-gray-300 mx-2 transition-colors duration-300"></div>
            <div id="address-step" class="flex flex-col items-center text-gray-400 transition-colors duration-300">
                <i class="fas fa-map-marker-alt text-2xl mb-1"></i>
                <span class="text-xs font-medium">Address</span>
            </div>
            <div id="address-summary-line" class="flex-1 border-t-2 border-gray-300 mx-2 transition-colors duration-300"></div>
            <div id="summary-step" class="flex flex-col items-center text-gray-400 transition-colors duration-300">
                <i class="fas fa-file-invoice-dollar text-2xl mb-1"></i>
                <span class="text-xs font-medium">Summary</span>
            </div>
            <div id="summary-payment-line" class="flex-1 border-t-2 border-gray-300 mx-2 transition-colors duration-300"></div>
            <div id="payment-step" class="flex flex-col items-center text-gray-400 transition-colors duration-300">
                <i class="fas fa-credit-card text-2xl mb-1"></i>
                <span class="text-xs font-medium">Payment</span>
            </div>
        </div>

        <!-- Step 0: Shopping Cart -->
        <div class="checkout" id="step0">
            <!-- Store Name Section -->
            <div class="p-4 flex items-center space-x-3 bg-gray-50 border-b border-gray-100">
                <!-- AniMo Logo Placeholder -->
                <img src="https://placehold.co/40x40/C4E0C1/000?text=AniMo" alt="AniMo Logo" class="w-10 h-10 rounded-full object-cover">
                <h2 class="text-xl font-semibold text-gray-800">AniMo Vegetables</h2>
            </div>

            <!-- Cart Items Section -->
            <div class="p-4 space-y-4">
                <!-- Item 1: Lettuce -->
                <div class="flex items-center space-x-4 p-3 bg-white rounded-xl shadow-sm border border-gray-200">
                    <!-- Product Image -->
                    <img src="https://placehold.co/80x80/E0F2F7/000?text=LETTUCE" alt="Lettuce" class="w-20 h-20 object-cover rounded-lg shadow-sm">
                    <div class="flex-1">
                        <h3 class="text-lg font-medium text-gray-900">LETTUCE</h3>
                        <p class="text-sm text-gray-600">₱ 60.00 1KG / HEAD</p>
                        <p class="text-xs text-gray-500">Metro Manila</p>
                        <div class="flex items-center mt-2 space-x-4">
                            <!-- Quantity Control -->
                            <div class="flex items-center bg-gray-100 rounded-full px-2 py-1">
                                <button class="text-red-500 hover:text-red-600 p-1 rounded-full"><i class="fas fa-minus text-sm"></i></button>
                                <span class="mx-2 text-gray-800 font-medium">1</span>
                                <button class="text-green-500 hover:text-green-600 p-1 rounded-full"><i class="fas fa-plus text-sm"></i></button>
                            </div>
                        </div>
                    </div>
                    <!-- Edit / Remove Buttons -->
                    <div class="flex flex-col items-center justify-end h-full space-y-1">
                        <button class="text-blue-500 hover:text-blue-600 text-sm flex items-center space-x-1">
                            <i class="fas fa-edit text-xs"></i><span>Edit</span>
                        </button>
                        <button class="text-red-500 hover:text-red-600 text-sm flex items-center space-x-1">
                            <i class="fas fa-trash-alt text-xs"></i><span>Remove</span>
                        </button>
                    </div>
                </div>

                <!-- Item 2: Tomatoes -->
                <div class="flex items-center space-x-4 p-3 bg-white rounded-xl shadow-sm border border-gray-200">
                    <!-- Product Image -->
                    <img src="https://placehold.co/80x80/FCE7D7/000?text=TOMATOES" alt="Tomatoes" class="w-20 h-20 object-cover rounded-lg shadow-sm">
                    <div class="flex-1">
                        <h3 class="text-lg font-medium text-gray-900">TOMATOES</h3>
                        <p class="text-sm text-gray-600">₱ 180.00 PER KILO</p>
                        <p class="text-xs text-gray-500">Metro Manila</p>
                        <div class="flex items-center mt-2 space-x-4">
                            <!-- Quantity Control -->
                            <div class="flex items-center bg-gray-100 rounded-full px-2 py-1">
                                <button class="text-red-500 hover:text-red-600 p-1 rounded-full"><i class="fas fa-minus text-sm"></i></button>
                                <span class="mx-2 text-gray-800 font-medium">1</span>
                                <button class="text-green-500 hover:text-green-600 p-1 rounded-full"><i class="fas fa-plus text-sm"></i></button>
                            </div>
                        </div>
                    </div>
                    <!-- Edit / Remove Buttons -->
                    <div class="flex flex-col items-center justify-end h-full space-y-1">
                        <button class="text-blue-500 hover:text-blue-600 text-sm flex items-center space-x-1">
                            <i class="fas fa-edit text-xs"></i><span>Edit</span>
                        </button>
                        <button class="text-red-500 hover:text-red-600 text-sm flex items-center space-x-1">
                            <i class="fas fa-trash-alt text-xs"></i><span>Remove</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Order Summary Section -->
            <div class="p-4 bg-gray-50 rounded-b-3xl">
                <div class="flex justify-between items-center text-gray-700 text-sm mb-2">
                    <span>SUB Total :</span>
                    <span>₱ 240.00</span>
                </div>
                <div class="flex justify-between items-center text-gray-700 text-sm mb-4">
                    <span>Delivery Charges :</span>
                    <span>₱ 50.00</span>
                </div>
                <div class="flex justify-between items-center text-green-700 font-bold text-lg mb-6">
                    <span>Order Total :</span>
                    <span>₱ 290.00</span>
                </div>

                <!-- Secure Checkout Button -->
                <button class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-full shadow-lg transition duration-300 ease-in-out transform hover:scale-105 continue-btn">
                    Secure Checkout
                </button>
            </div>
        </div>

        <!-- Step 1: Address Selection -->
        <div class="checkout" id="step1">
            <div class="p-4 space-y-4 bg-gray-100">
                <!-- Current Address Display (Common to all steps) -->
                <div class="relative bg-white rounded-xl shadow-lg p-4 border-2 border-green-500">
                    <div class="absolute top-3 right-3 text-green-500">
                        <i class="fas fa-check-circle text-xl"></i>
                    </div>
                    <p class="font-semibold text-gray-900 mb-1">Abdul Salsal</p>
                    <p class="text-sm text-gray-600">Metro Manila, Philippines</p>
                    <p class="text-sm text-gray-600">1839</p>
                    <p class="text-sm text-gray-600 mb-3">+68 900909090</p>
                    <div class="flex justify-end">
                        <button class="text-blue-500 hover:text-blue-600 text-sm font-medium change-address-btn">Change</button>
                    </div>
                </div>

                <!-- Address Selection Options -->
                <div class="content space-y-4">
                    <div class="address-card bg-white rounded-xl shadow-md p-4 border border-gray-200 transition-all duration-300 ease-in-out cursor-pointer hover:scale-[1.02] active" data-address-type="work">
                        <div class="flex items-center space-x-3 mb-2 text-gray-800">
                            <i class="fas fa-building text-xl"></i>
                            <h3 class="font-semibold text-lg">WORK</h3>
                        </div>
                        <p class="text-sm text-gray-800 font-medium">ABDUL SAL SAL</p>
                        <p class="text-sm text-gray-600">+68 90 03243295</p>
                        <p class="text-sm text-gray-600">BGC , TAGUIG CITY PHILIPPINES</p>
                    </div>
                    <div class="address-card bg-white rounded-xl shadow-md p-4 border border-gray-200 transition-all duration-300 ease-in-out cursor-pointer hover:scale-[1.02]" data-address-type="home">
                        <div class="flex items-center space-x-3 mb-2 text-gray-800">
                            <i class="fas fa-home text-xl"></i>
                            <h3 class="font-semibold text-lg">HOME</h3>
                        </div>
                        <p class="text-sm text-gray-800 font-medium">ABDUL SAL SAL</p>
                        <p class="text-sm text-gray-600">+68 90 03243295</p>
                        <p class="text-sm text-gray-600">LAGUNA, PHILIPPINES</p>
                    </div>
                </div>
            </div>

            <!-- Buttons for Step 1 -->
            <div class="p-4 bg-white rounded-b-3xl flex justify-between space-x-4">
                <button class="back-btn flex-1 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-3 px-4 rounded-full shadow-lg transition duration-300 ease-in-out transform hover:scale-105">
                    Back
                </button>
                <button class="continue-btn flex-1 bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-full shadow-lg transition duration-300 ease-in-out transform hover:scale-105">
                    Continue
                </button>
            </div>
        </div>

        <!-- Step 2: Order Summary -->
        <div class="checkout" id="step2">
            <div class="p-4 space-y-4 bg-gray-100">
                <!-- Current Address Display -->
                <div class="relative bg-white rounded-xl shadow-lg p-4 border-2 border-green-500">
                    <div class="absolute top-3 right-3 text-green-500">
                        <i class="fas fa-check-circle text-xl"></i>
                    </div>
                    <p class="font-semibold text-gray-900 mb-1">Abdul Salsal</p>
                    <p class="text-sm text-gray-600">Metro Manila, Philippines</p>
                    <p class="text-sm text-gray-600">1839</p>
                    <p class="text-sm text-gray-600 mb-3">+68 900909090</p>
                    <div class="flex justify-end">
                        <button class="text-blue-500 hover:text-blue-600 text-sm font-medium change-address-btn">Change</button>
                    </div>
                </div>

                <!-- Product Summary Section -->
                <div class="item-container bg-white rounded-xl shadow-md overflow-hidden">
                    <div class="flex items-center space-x-4 p-3 border-b border-gray-200">
                        <img src="https://placehold.co/80x80/E0F2F7/000?text=LETTUCE" alt="Lettuce" class="w-20 h-20 object-cover rounded-lg shadow-sm">
                        <div class="flex-1">
                            <h3 class="text-lg font-medium text-gray-900">LETTUCE</h3>
                            <p class="text-sm text-gray-600">₱ 60.00 1KG / HEAD</p>
                            <p class="text-xs text-gray-500">Metro Manila</p>
                        </div>
                    </div>
                    <div class="flex items-center space-x-4 p-3">
                        <img src="https://placehold.co/80x80/FCE7D7/000?text=TOMATOES" alt="Tomatoes" class="w-20 h-20 object-cover rounded-lg shadow-sm">
                        <div class="flex-1">
                            <h3 class="text-lg font-medium text-gray-900">TOMATOES</h3>
                            <p class="text-sm text-gray-600">₱ 180.00 PER KILO</p>
                            <p class="text-xs text-gray-500">Metro Manila</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Buttons for Step 2 -->
            <div class="p-4 bg-white rounded-b-3xl flex justify-between space-x-4">
                <button class="back-btn flex-1 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-3 px-4 rounded-full shadow-lg transition duration-300 ease-in-out transform hover:scale-105">
                    Back
                </button>
                <button class="continue-btn flex-1 bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-full shadow-lg transition duration-300 ease-in-out transform hover:scale-105">
                    Payment
                </button>
            </div>
        </div>

        <!-- Step 3: Payment Options -->
        <div class="checkout" id="step3">
            <div class="p-4 space-y-4 bg-gray-100">
                <!-- Current Address Display -->
                <div class="relative bg-white rounded-xl shadow-lg p-4 border-2 border-green-500">
                    <div class="absolute top-3 right-3 text-green-500">
                        <i class="fas fa-check-circle text-xl"></i>
                    </div>
                    <p class="font-semibold text-gray-900 mb-1">Abdul Salsal</p>
                    <p class="text-sm text-gray-600">Metro Manila, Philippines</p>
                    <p class="text-sm text-gray-600">1839</p>
                    <p class="text-sm text-gray-600 mb-3">+68 900909090</p>
                    <div class="flex justify-end">
                        <button class="text-blue-500 hover:text-blue-600 text-sm font-medium change-address-btn">Change</button>
                    </div>
                </div>

                <!-- Payment Options -->
                <div class="content space-y-4">
                    <div class="payment-option-card bg-white rounded-xl shadow-md p-4 border border-gray-200 transition-all duration-300 ease-in-out cursor-pointer hover:scale-[1.02]" data-payment-type="cod">
                        <div class="flex items-center space-x-3 mb-1 text-gray-800">
                            <i class="fas fa-truck text-xl"></i>
                            <h3 class="font-semibold text-lg">Cash On Delivery</h3>
                        </div>
                        <p class="text-sm text-gray-600">Additional 20 Charges for COD services</p>
                    </div>
                    <div class="payment-option-card bg-white rounded-xl shadow-md p-4 border border-gray-200 transition-all duration-300 ease-in-out cursor-pointer hover:scale-[1.02]" data-payment-type="credit">
                        <div class="flex items-center space-x-3 mb-1 text-gray-800">
                            <i class="fas fa-credit-card text-xl"></i>
                            <h3 class="font-semibold text-lg">CREDIT CARD</h3>
                        </div>
                        <p class="text-sm text-gray-900 font-medium">ABDUL SAL SAL</p>
                        <p class="text-sm text-gray-700">+68 90 03898***</p>
                    </div>
                </div>

                <!-- Promo Code Section -->
                <div class="p-2 text-gray-700">
                    <p>Do you have a promo code?</p>
                </div>
            </div>

            <!-- Buttons for Step 3 -->
            <div class="p-4 bg-white rounded-b-3xl flex justify-between space-x-4">
                <button class="back-btn flex-1 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-3 px-4 rounded-full shadow-lg transition duration-300 ease-in-out transform hover:scale-105">
                    Back
                </button>
                <button class="checkout-btn flex-1 bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-full shadow-lg transition duration-300 ease-in-out transform hover:scale-105">
                    Place Order
                </button>
            </div>
        </div>
    </div>

    <script>
        // Define all steps with their corresponding headers and optional item counts
        const steps = [
            { id: 'step0', header: 'Your Cart', showItemsCount: true },
            { id: 'step1', header: 'Check Out 1/4', showItemsCount: false },
            { id: 'step2', header: 'Check Out 2/4', showItemsCount: false },
            { id: 'step3', header: 'Check Out 3/4', showItemsCount: false }
        ];
        let currentStepIndex = 0; // Start at step 0 (cart)

        // Function to update header and progress indicators
        function updateUIForStep(index) {
            const headerElement = document.getElementById('checkout-header').querySelector('h1');
            const itemsCountElement = document.getElementById('items-count');
            const cartStep = document.getElementById('cart-step');
            const addressStep = document.getElementById('address-step');
            const summaryStep = document.getElementById('summary-step');
            const paymentStep = document.getElementById('payment-step');
            const cartAddressLine = document.getElementById('cart-address-line');
            const addressSummaryLine = document.getElementById('address-summary-line');
            const summaryPaymentLine = document.getElementById('summary-payment-line');

            // Update header text
            headerElement.textContent = steps[index].header;

            // Show/hide items count
            if (steps[index].showItemsCount) {
                itemsCountElement.classList.remove('hidden');
            } else {
                itemsCountElement.classList.add('hidden');
            }

            // Reset all progress indicators to gray
            [cartStep, addressStep, summaryStep, paymentStep].forEach(el => {
                el.classList.remove('text-green-600');
                el.classList.add('text-gray-400');
            });
            [cartAddressLine, addressSummaryLine, summaryPaymentLine].forEach(el => {
                el.classList.remove('border-green-400');
                el.classList.add('border-gray-300');
            });

            // Apply active styles based on current step
            if (index >= 0) {
                cartStep.classList.remove('text-gray-400');
                cartStep.classList.add('text-green-600');
            }
            if (index >= 1) {
                cartAddressLine.classList.remove('border-gray-300');
                cartAddressLine.classList.add('border-green-400');
                addressStep.classList.remove('text-gray-400');
                addressStep.classList.add('text-green-600');
            }
            if (index >= 2) {
                addressSummaryLine.classList.remove('border-gray-300');
                addressSummaryLine.classList.add('border-green-400');
                summaryStep.classList.remove('text-gray-400');
                summaryStep.classList.add('text-green-600');
            }
            if (index >= 3) {
                summaryPaymentLine.classList.remove('border-gray-300');
                summaryPaymentLine.classList.add('border-green-400');
                paymentStep.classList.remove('text-gray-400');
                paymentStep.classList.add('text-green-600');
            }
        }

        // Function to show the current step's content
        function showStep(index) {
            steps.forEach((step, i) => {
                const stepEl = document.getElementById(step.id);
                if (i === index) {
                    stepEl.classList.add('active');
                } else {
                    stepEl.classList.remove('active');
                }
            });
            currentStepIndex = index;
            updateUIForStep(index);
        }

        // Event listeners for address/payment card selection
        document.querySelectorAll('.address-card, .payment-option-card').forEach(card => {
            card.addEventListener('click', () => {
                const parentContent = card.closest('.content');
                if (parentContent) {
                    parentContent.querySelectorAll('.address-card, .payment-option-card').forEach(d => {
                        d.classList.remove('active', 'bg-green-100', 'border-green-300');
                        d.classList.add('bg-white', 'border-gray-200');
                        // Remove checkmark if not the clicked card
                        const checkmark = d.querySelector('.fa-check-circle');
                        if (checkmark) {
                            checkmark.remove();
                        }
                    });

                    // Add active styles to clicked card
                    card.classList.add('active', 'bg-green-100', 'border-green-300');
                    card.classList.remove('bg-white', 'border-gray-200');

                    // Add checkmark if not already present
                    const checkmarkDiv = document.createElement('div');
                    checkmarkDiv.className = 'absolute top-3 right-3 text-green-500';
                    checkmarkDiv.innerHTML = '<i class="fas fa-check-circle text-xl"></i>';
                    card.prepend(checkmarkDiv); // Prepend to ensure it's at the start for absolute positioning
                }
            });
        });

        // Continue button logic
        document.querySelectorAll('.continue-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                if (currentStepIndex < steps.length - 1) {
                    showStep(currentStepIndex + 1);
                }
            });
        });

        // Back button logic
        document.querySelectorAll('.back-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                if (currentStepIndex > 0) {
                    showStep(currentStepIndex - 1);
                }
            });
        });

        // Checkout button logic (for final step)
        document.querySelector('.checkout-btn').addEventListener('click', () => {
            console.log('Checkout Complete!');
            // In a real application, you would proceed with order submission here.
            // For this example, we'll just log to console.
        });

        // Initial load: show the first step (shopping cart)
        showStep(currentStepIndex);
    </script>
</body>
</html>
